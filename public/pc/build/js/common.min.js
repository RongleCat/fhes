'use strict';

$(function () {
    var lang = $.cookie('lang') || 'zh';
    $('.select-lang').on('click', function () {
        if (lang === 'zh') {
            $.cookie('lang', 'en', {
                path: '/'
            });
        } else {
            $.cookie('lang', 'zh', {
                path: '/'
            });
        }
        setTimeout(function () {
            window.location.reload();
        }, 100);
    });
    window.onload = function () {
        $('[data-hd]').each(function (i, item) {
            var hdSrc = $(item).data('hd');
            var hdimg = new Image();
            $(hdimg).on('load', function (e) {
                if (item.localName === 'img') {
                    item.src = e.target.src;
                } else {
                    $(item).css('background-image', 'url(\'' + e.target.src + '\')');
                }
            });
            hdimg.src = hdSrc;
        });
    };

    $('.nav-list').on('mouseenter', '>li', function (e) {
        var $this = $(e.currentTarget);
        var $ul = $this.find('ul');
        if ($ul.length != 0) {
            $ul.fadeIn('fast');
            $this.on('mouseleave', function (e) {
                $ul.fadeOut('fast');
            });
        }
    });
});