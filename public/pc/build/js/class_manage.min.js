"use strict";var fileTypes=["othe","zip","avi","swf","wav","txt","rmvb","xls","mkv","psd","exe","gif","pdf","mp4","ppt","png","mp3","jpg","doc"],layer=null;function getFileType(l){var e=l.lastIndexOf(".");return l.substring(e+1,l.length)}function bytesToSize(l){if(0===l)return"0 B";var e=Math.floor(Math.log(l)/Math.log(1024));return(l/Math.pow(1024,e)).toPrecision(3)+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}$(function(){var l=layui.table;l.render({url:"/manage/getClassList",elem:"#demo",id:"demo",page:{curr:1},limit:10,limits:[10,15,20],height:"full-200",where:{},cols:[[{field:"id",title:"ID",width:80},{field:"classname",title:"中文名称"},{field:"eclassname",title:"英文名称"},{fixed:"right",align:"center",title:"操作",width:180,field:"",templet:function(l){return'<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">编辑</a>\n                    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>'}}]]});l.on("tool(demo)",function(e){var a=e.data,l=e.event;e.tr;"del"===l?layer.confirm("真的要删除这个分类吗？",function(l){layer.close(l),$.ajax({type:"POST",url:"/manage/deleteclass",dataType:"json",data:{id:a.id},success:function(l){200===l.ok?e.del():layer.msg(l.msg,function(){})}})}):layer.open({type:1,area:"400px",title:"修改分类名称",content:'<div class="addfile-container">\n                <form class="layui-form layui-form-pane">\n                <div class="layui-form-item">\n                    <label class="layui-form-label">分类名称</label>\n                    <div class="layui-input-block">\n                        <input type="text" name="title" lay-verify="" placeholder="请输入分类名称" autocomplete="off" class="layui-input" value="'+a.classname+'">\n                    </div>\n                </div>\n                <div class="layui-form-item">\n                    <label class="layui-form-label">英文名称</label>\n                    <div class="layui-input-block">\n                        <input type="text" name="etitle" lay-verify="" placeholder="请输入分类英文名称" autocomplete="off" class="layui-input" value="'+a.eclassname+'">\n                    </div>\n                </div>\n                    \n                    <div class="layui-form-item btn-box">\n                        <button class="layui-btn" lay-submit lay-filter="submit" id="btn-submit">立即提交</button>\n                    </div>\n                </form>\n            </div>',success:function(l,e){console.log(l,e),layui.use("form",function(){layui.form.on("submit(submit)",function(l){if(console.log(l),!$.trim(l.field.title))return layer.msg("分类名称不能为空",function(){}),!1;if(!$.trim(l.field.etitle))return layer.msg("分类英文名称不能为空",function(){}),!1;var e={id:a.id,classname:$.trim(l.field.title),eclassname:$.trim(l.field.etitle)};return console.log(e),$.ajax({type:"POST",url:"/manage/changeclass",dataType:"json",data:e,success:function(l){200===l.ok?location.reload():layer.msg(l.msg)}}),!1})})}})}),layui.use("layer",function(){layer=layui.layer,$("#btn-addfile").on("click",function(){layer.open({type:1,area:"400px",content:'<div class="addfile-container">\n                <form class="layui-form layui-form-pane">\n                <div class="layui-form-item">\n                    <label class="layui-form-label">分类名称</label>\n                    <div class="layui-input-block">\n                        <input type="text" name="title" lay-verify="" placeholder="请输入分类名称" autocomplete="off" class="layui-input">\n                    </div>\n                </div>\n                <div class="layui-form-item">\n                    <label class="layui-form-label">英文名称</label>\n                    <div class="layui-input-block">\n                        <input type="text" name="etitle" lay-verify="" placeholder="请输入分类英文名称" autocomplete="off" class="layui-input">\n                    </div>\n                </div>\n                    \n                    <div class="layui-form-item btn-box">\n                        <button class="layui-btn" lay-submit lay-filter="submit" id="btn-submit">立即提交</button>\n                    </div>\n                </form>\n            </div>',success:function(l,e){layui.use("form",function(){layui.form.on("submit(submit)",function(l){if(console.log(l),!$.trim(l.field.title))return layer.msg("分类名称不能为空",function(){}),!1;if(!$.trim(l.field.etitle))return layer.msg("分类英文名称不能为空",function(){}),!1;var e={classname:$.trim(l.field.title),eclassname:$.trim(l.field.etitle)};return $.ajax({type:"POST",url:"/manage/changeclass",dataType:"json",data:e,success:function(l){200===l.ok?location.reload():layer.msg(l.msg)}}),!1})})}})})})});