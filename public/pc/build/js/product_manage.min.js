"use strict";var fileTypes=["othe","zip","avi","swf","wav","txt","rmvb","xls","mkv","psd","exe","gif","pdf","mp4","ppt","png","mp3","jpg","doc"];$(function(){var e=layui.table,i={url:"/manage/getProductList",elem:"#demo",id:"demo",page:{curr:1},limit:10,limits:[10,15,20],height:"full-200",where:{},cols:[[{field:"id",title:"ID",width:80},{field:"cover",title:"封面图片",width:130,templet:function(e){return'<img src="'+e.cover+'">'}},{field:"title",title:"中文标题"},{field:"entitle",title:"英文标题"},{field:"classname",title:"所属分类"},{fixed:"right",align:"center",title:"操作",width:180,field:"filepath",templet:function(e){return'<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>\n          <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>\n          <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>'}}]]},l=e.render(i);$("#btn-search").on("click",function(e){var t=$("#ipt-keyword").val();i.where.keyword=t,l.reload(i)}),$("#btn-clear").on("click",function(e){delete i.where.keyword,$("#ipt-keyword").val(""),l.reload(i)}),$("#ipt-keyword").on("keypress",function(e){13===e.keyCode&&$("#btn-search").click()}),layui.use("form",function(){layui.form.on("select(class)",function(e){i.where.classid=e.value,l.reload(i)})}),e.on("tool(demo)",function(t){var i=t.data,e=t.event;t.tr;"del"===e?layer.confirm("真的要删除这个产品吗？",function(e){layer.close(e),$.ajax({type:"POST",url:"/manage/deleteproduc",dataType:"json",data:{id:i.id},success:function(e){200===e.ok?t.del():layer.msg(e.msg,function(){})}})}):"detail"==e?console.log("查看"):location.href="/manage/editeroduct/"+i.id})}),$("#btn-addfile").on("click",function(){location.href="/manage/adderoduct"});